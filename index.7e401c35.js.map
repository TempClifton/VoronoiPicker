{"mappings":"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","sources":["../js/lm_src/lm_base.js"],"sourcesContent":["'use strict';\n\n/**\n * The global namespace for all Lost Marble functions, classes, and globals.\n * @namespace\n*/\n//let lm = {};\n(function(global)\n{\n\tglobal.lm = {};\n})(this);\n\n/**\n * An application can set this to false for release builds.\n * It controls things like console output and other debug testing.\n * @type {boolean}\n */\nlm.DEBUG = true;\n\n/**\n * A very small number for testing if a value is basically zero.\n * @type {number}\n */\nlm.TINY = 1e-6;\n\n/**\n * A very large number.\n * @type {number}\n */\nlm.HUGE = 1e6;\n\n/**\n * The vaue of pi.\n * @type {number}\n */\nlm.PI = Math.PI;\n\n/**\n * The value of pi * 2.\n * @type {number}\n */\nlm.PI2 = Math.PI * 2.0;\n\n/**\n * The value of pi / 2.\n * @type {number}\n */\nlm.PIOVER2 = Math.PI / 2.0;\n\n/**\n * Tests whether this is a mobile device.\n * This function is not very reliable or clear about its behavior. For example, my iPad is not detected as a mobile device.\n * @returns {boolean} true if this is a mobile device, otherwise false\n*/\nlm.IsMobileDevice = function()\n{\n\tlet check = false;\n\t(function(a,b){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\n\n\tif (!check)\n\t{ // check for iPad\n\t\tconst ua = window.navigator.userAgent.toLowerCase();\n\t\tconst isiPad = ua.indexOf('ipad') > -1 || ua.indexOf('macintosh') > -1 && 'ontouchend' in document;\n\t\tif (isiPad)\n\t\t\tcheck = true;\n\t}\n\n\treturn check;\n}\n\nlm._MouseDownCount_ = 0;\n\n/**\n * Tests whether the mouse is down.\n * @returns {boolean} true if the mouse is down, otherwise false\n*/\nlm.IsMouseDown = function()\n{\n\treturn (lm._MouseDownCount_ > 0);\n}\n\nlm.FocusedInput = null;\n\n//***********************************************************************************\n//*** Simple One Argument Functions\n//***********************************************************************************\n\n/**\n * Absolute value of a number.\n * @param {number} a A number\n * @returns {number} The absolute value of a\n */\nlm.Abs = function(a)\n{\n\tif (a < 0)\n\t\treturn -a;\n\treturn a;\n}\n\n/**\n * Rounds a number to the nearest integer.\n * @param {number} a A number\n * @returns {number} The value of a rounded to the nearest integer.\n */\nlm.Round = function(a)\n{\n\tif (a > 0)\n\t\treturn parseInt(a + 0.5);\n\treturn -parseInt(0.5 - a);\n}\n\n/**\n * Returns the binary sign of a number.\n * @param {number} a A number\n * @returns {number} The binary sign of the number, either -1, or 1 if the number is >= 0.\n */\nlm.Sgn = function(a)\n{ // return the binary sign of a, either -1, or 1 if >= 0\n\tif (a < 0)\n\t\treturn -1;\n\treturn 1;\n}\n\n/**\n * Returns the sign of a number.\n * @param {number} a A number\n * @returns {number} The sign of the number, either -1, 0, or 1.\n */\nlm.Zsgn = function(a)\n{ // return the sign of a, either -1, 0, or 1\n\tif (a < 0)\n\t\treturn -1;\n\telse if (a > 0)\n\t\treturn 1;\n\treturn 0;\n}\n\n/**\n * Returns a floating point random number between 0 and 1.\n * Quick and dirty. For better control over the random sequence, see the lm.RandomSequence class\n * @returns {number} A floating point random number between 0 and 1.\n */\nlm.Frandom = function()\n{ // random number between 0 and 1\n\treturn Math.random();\n}\n\n/**\n * Returns a floating point random number between -1 and 1.\n * Quick and dirty. For better control over the random sequence, see the lm.RandomSequence class\n * @returns {number} A floating point random number between -1 and 1.\n */\nlm.FrandomSgn = function()\n{ // random number between -1 and 1\n\treturn Math.random() * 2.0 - 1.0;\n}\n\n/**\n * Returns an integer random number between min and max.\n * @param {number} min The lower integer in the range.\n * @param {number} max The upper integer in the range.\n * @returns {number} An integer random number between min and max.\n */\nlm.RandomInt = function(min, max)\n{ // random integer between min and max\n\treturn min + lm.Floor(Math.random() * (0.999 + max - min));\n}\n\n/**\n * Returns a random number between min and max.\n * @param {number} min The lower float in the range.\n * @param {number} max The upper float in the range.\n * @returns {number} A random number between min and max.\n */\nlm.RandomFloat = function(min, max)\n{ // random float between min and max\n\treturn min + Math.random() * (max - min);\n}\n\n/**\n * Returns a random true/false value.\n * @param {number} odds The odds of a true result. Ranges from 0 to 1.\n * @returns {boolean} A random boolean value.\n */\nlm.RandomBool = function(odds)\n{\n\treturn (lm.RandomFloat(0.0, 1.0) < odds);\n}\n\n/**\n * Returns the nearest integer less than or equal to a floating point number.\n * @param {number} a A number\n * @returns {number} The nearest integer less than or equal to a.\n */\nlm.Floor = function(a)\n{\n\tif (a < 0)\n\t\treturn parseInt(a - 1);\n\treturn parseInt(a);\n}\n\n/**\n * Returns the nearest integer greater than or equal to a floating point number.\n * @param {number} a A number\n * @returns {number} The nearest integer greater than or equal to a.\n */\nlm.Ceil = function(a)\n{\n\tif (a < 0)\n\t\treturn parseInt(a);\n\treturn parseInt(a + 1);\n}\n\n/**\n * Modulo operation that works for both positive and negative numbers.\n * The basic % operator does not do the right thing for negative numbers.\n * @param {number} x A number\n * @param {number} n The modulo\n * @returns {number} x modulo n\n */\nlm.Mod = function(x, n)\n{\n\treturn ((x % n + n) % n);\n}\n\n/**\n * Converts degrees to radians.\n * @param {number} a An angle in degrees.\n * @returns {number} The same angle in radians.\n */\nlm.Rad = function(a)\n{\n\treturn a * Math.PI / 180.0;\n}\n\n/**\n * Converts radians to degrees.\n * @param {number} a An angle in radians.\n * @returns {number} The same angle in degrees.\n */\nlm.Deg = function(a)\n{\n\treturn a * 180.0 / Math.PI;\n}\n\n//***********************************************************************************\n//*** Simple Multi-Argument Functions\n//***********************************************************************************\n\n/**\n * Returns the smaller of two numbers.\n * @param {number} a A number\n * @param {number} b A number\n * @returns {number} The smaller of a and b.\n */\nlm.Min = function(a, b)\n{\n\treturn a < b ? a : b;\n}\n\n/**\n * Returns the larger of two numbers.\n * @param {number} a A number\n * @param {number} b A number\n * @returns {number} The larger of a and b.\n */\nlm.Max = function(a, b)\n{\n\treturn a > b ? a : b;\n}\n\n/**\n * Linear interpolation.\n * @param {number} a A number used as a percentage. Typically between 0 and 1.\n * @param {number} l A number corresponding to 0 percent.\n * @param {number} h A number corresponding to 1 percent.\n * @returns {number} A linearly interpolated number between l and h.\n */\nlm.Lerp = function(a, l, h)\n{\n\t// linear interpolation from l (when a == 0) to h (when a == 1)\n\t// (equal to (a * h) + ((1 - a) * l)\n\treturn l + (h - l) * a;\n}\n\n/**\n * Smooth interpolation.\n * @param {number} a A number used as a percentage. Typically between 0 and 1.\n * @param {number} l A number corresponding to 0 percent.\n * @param {number} h A number corresponding to 1 percent.\n * @returns {number} A smoothly interpolated number between l and h.\n */\nlm.Slerp = function(percent, l, h)\n{\n\t// Smooth interpolation between 2 values:\n\t// Slopes at start and end of curve are 0.\n\tlet a = 3.0 * percent * percent - 2.0 * percent * percent * percent;\n\treturn lm.Lerp(a, l, h);\n}\n\n/**\n * Spline interpolation.\n * @param {number} xVal A float between min.x and max.x\n * @param {lm_Vector2} preVal An lm.Vector2 object\n * @param {lm_Vector2} min An lm.Vector2 object\n * @param {lm_Vector2} max An lm.Vector2 object\n * @param {lm_Vector2} postVal An lm.Vector2 object\n * @returns {number} A smoothly interpolated number between min.y and max.y.\n */\nlm.SplineInterp4 = function(xVal, preVal, min, max, postVal)\n{\n\tlet inA, inB, tempVec;\n\n\tlet f = max.y - min.y;\n\tif (lm.Abs(f) < lm.TINY)\n\t{ // special case 1 - min and max have the same y-value\n\t\ttempVec = max.Minus(min).Times(0.33333333);\n\t\tinA = min.Plus(tempVec);\n\t\tinB = max.Minus(tempVec);\n\t}\n\telse\n\t{\n\t\tf = min.y - preVal.y;\n\t\tif (lm.Abs(f) < lm.TINY)\n\t\t{ // special case 2 - min and preVal have the same y-value\n\t\t\ttempVec = min.Minus(preVal).Times(0.33333333);\n\t\t\tinA = min.Plus(tempVec);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttempVec = max.Minus(preVal);\n\t\t\ttempVec.DivEq(tempVec.x);\n\t\t\ttempVec.TimesEq((max.x - min.x) * 0.333333);\n\t\t\tinA = min.Plus(tempVec);\n\t\t}\n\n\t\tf = postVal.y - max.y;\n\t\tif (lm.Abs(f) < lm.TINY)\n\t\t{ // special case 3 - max and postVal have the same y-value\n\t\t\ttempVec = postVal.Minus(max).Times(0.33333333);\n\t\t\tinB = max.Minus(tempVec);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttempVec = postVal.Minus(min);\n\t\t\ttempVec.DivEq(tempVec.x);\n\t\t\ttempVec.TimesEq((max.x - min.x) * 0.333333);\n\t\t\tinB = max.Minus(tempVec);\n\t\t}\n\t}\n\n\t// These next lines prevent \"overshoot\" by restricting the interpolation\n\t// control points to be within the range of the actual key values.\n\t// The ideal solution might be to adjust the control points on both sides\n\t// so that the curve doesn't overshoot, but still maintains continuity.\n\tlet yMin = lm.Min(min.y, max.y);\n\tlet yMax = lm.Max(min.y, max.y);\n\tinA.y = lm.Clamp(inA.y, yMin, yMax);\n\tinB.y = lm.Clamp(inB.y, yMin, yMax);\n\n\t// Start at a t-value of xVal, then refine it by back-calculating the actual x value\n\tlet t = xVal;\n\t/*int32\tcount;\n\treal\tnewX;\n\tcount = 0;\n\tdo\n\t{\n\t\tf = (t - min.x) / (max.x - min.x);\n\t\tnewX = f * f * f * max.x;\n\t\tnewX += 3.0f * f * f * (1.0f - f) * inB.x;\n\t\tnewX += 3.0f * f * (1.0f - f) * (1.0f - f) * inA.x;\n\t\tnewX += (1.0f - f) * (1.0f - f) * (1.0f - f) * min.x;\n\t\tt += (xVal - newX) * 0.5f;\n\t\tcount++;\n\t\tif (count > 2)\n\t\t\tbreak;\n\t} while (LM_FABS(newX - xVal) > 0.5f);*/\n\n\tf = (t - min.x) / (max.x - min.x);\n\tlet res = f * f * f * max.y;\n\tres += 3.0 * f * f * (1.0 - f) * inB.y;\n\tres += 3.0 * f * (1.0 - f) * (1.0 - f) * inA.y;\n\tres += (1.0 - f) * (1.0 - f) * (1.0 - f) * min.y;\n\n\treturn res;\n}\n\n/**\n * Clamps a number between a specified range.\n * @param {number} v A number to be clamped.\n * @param {number} l The low end of the range.\n * @param {number} h The high end of the range.\n * @returns {number} A number clamped such that l <= result <= h.\n */\nlm.Clamp = function(v, l, h)\n{\n\tif (v < l)\n\t\treturn l;\n\tif (v > h)\n\t\treturn h;\n\treturn v;\n}\n\n/**\n * Tests if two floating point numbers are equal.\n * @param {number} r1 A number.\n * @param {number} r2 A second number.\n * @param {number} [tolerance=lm.TINY] The tolerance to consider for \"equals\".\n * @returns {number} Returns true if r1 and r2 are within a tolerance. Otherwise returns false.\n */\nlm.RealEqual = function(r1, r2, tolerance)\n{\n\ttolerance = lm.Default(tolerance, lm.TINY);\n\tlet f = r1 - r2;\n\tif (lm.Abs(f) < tolerance)\n\t\treturn true;\n\telse\n\t\treturn false;\n}\n\n/**\n * Used to set up a default value for a variable.\n * @param {any} variable Some variable.\n * @param {any} value The default value for that variable if it is undefined.\n * @returns {number} Returns \"variable\" if it is defined, otherwise returns value.\n * @example\n * a = lm.Default(a, 3);\n */\nlm.Default = function(variable, value)\n{\n\treturn (variable !== undefined) ? variable : value;\n}\n\n/**\n * Converts an rgb color string to a hex color string.\n * For example, \"rgb(255, 0, 0) to 0xff0000\"\n * @param {string} colorStr An rgb-style color string.\n * @returns {string} Returns the same color value as a 0x-style color string.\n */\nlm.RgbStringToHexString = function(colorStr)\n{ // https://stackoverflow.com/questions/13070054/convert-rgb-strings-to-hex-in-javascript\n\t// First cut away the CSS parts:\n\tlet a = colorStr.split(\"(\")[1].split(\")\")[0];\n\t// Then split it into separate numbers:\n\ta = a.split(\",\");\n\t// Convert the single numbers to hex:\n\tlet b = a.map(function(x)\n\t{ // For each array element\n\t\tx = parseInt(x).toString(16); //Convert to a base16 string\n\t\treturn (x.length == 1) ? \"0\" + x : x; // Add zero if we get only one character\n\t});\n\t// And glue it back together:\n\tb = \"0x\" + b.join(\"\");\n\treturn b;\n}\n\n/**\n * Converts an rgb color string to lm.RgbColor object.\n * For example, \"rgb(255, 0, 0) to 0xff0000\"\n * @param {string} colorStr An rgb-style color string.\n * @returns {lm.RgbColor} Returns the same color value as a color object.\n */\nlm.RgbStringToRgbColor = function(colorStr)\n{ // https://stackoverflow.com/questions/13070054/convert-rgb-strings-to-hex-in-javascript\n\t// First cut away the CSS parts:\n\tlet a = colorStr.split(\"(\")[1].split(\")\")[0];\n\t// Then split it into separate numbers:\n\ta = a.split(\",\");\n\tfor (let i = 0; i < a.length; i++)\n\t{\n\t\ta[i] = parseInt(a[i]);\n\t}\n\tif (a.length == 3)\n\t\treturn new lm.RgbColor(a[0], a[1], a[2]);\n\telse if (a.length == 4)\n\t\treturn new lm.RgbColor(a[0], a[1], a[2], a[3]);\n\telse\n\t\treturn new lm.RgbColor(0, 0, 0);\n}\n\n/**\n * Generates a UUID string.\n * @returns {string} A UUID string.\n */\nlm.UUID = function()\n{\n\tlet d = new Date().getTime();\n\tlet uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c)\n\t{\n\t\tlet r = (d + Math.random() * 16) % 16 | 0;\n\t\td = Math.floor(d / 16);\n\t\treturn (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n\t});\n\treturn uuid;\n}\n\n/**\n * Removes punctuation from a string.\n * @param {string} str A string.\n * @returns {string} A new string with any punctuation characters removed.\n */\nlm.RemovePunctuation = function(str)\n{\n\treturn str.replace(/[\\.,-\\/#!$%\\^&\\*;:{}=\\-_`~()?]/g, \"\");\n}\n\n/**\n * Removes an extension from a filename.\n * @param {string} str A string.\n * @returns {string} A new string with any file extension removed.\n */\nlm.RemoveFileExtension = function(str)\n{\n\treturn str.replace(/\\.[^/.]+$/, \"\");\n}\n\n/**\n * Tests whether an image is loaded and valid.\n * @param {Image} img An image object.\n * @returns {boolean} True if the image is done loading and is valid, otherwise false.\n */\nlm.IsImageValid = function(img)\n{\n\tif (img.videoWidth)\n\t{\n\t\tif (img.videoHeight && img.readyState >= 3)\n\t\t\treturn true;\n\t\telse\n\t\t\treturn false;\n\t}\n\telse if (img.complete && img.naturalWidth !== undefined && img.naturalWidth > 0)\n\t\treturn true;\n\telse\n\t\treturn false;\n}\n\n/**\n * Formats a string and a variable number of arguments.\n * @param {string} str The format string.\n * @returns {string} Returns a string with the variable arguments inserted into place.\n * @example\n * lm.Format(\"And the %1 want to know whose %2 you %3\", \"papers\", \"shirt\", \"wear\");\n * \"And the papers want to know whose shirt you wear\"\n */\nlm.Format = function(str)\n{\n\tlet args = arguments;\n\tlet pattern = new RegExp(\"%([1-\" + arguments.length + \"])\", \"g\");\n\treturn String(str).replace(pattern, function(match, index)\n\t{\n\t\treturn args[index];\n\t});\n}\n\n/**\n * Randomly shuffles the elements of an array.\n * @param {number} array An array object.\n */\nlm.ShuffleArray = function(array)\n{\n\tlet len = array.length;\n\tlet shuffles = len * 3;\n\tfor (let i = 0; i < shuffles; i++)\n\t{\n\t\tlet item = array.pop();\n\t\tlet pos = Math.floor(Math.random() * (len - 1));\n\t\tarray.splice(pos, 0, item);\n\t}\n}\n\nfunction _dismissDropdownsOnClick(event)\n{\n\tif (!event.target.matches('.dropbtn'))\n\t{\n\t\tlet dropdowns = document.getElementsByClassName(\"dropdown-content\");\n\t\tfor (let i = 0; i < dropdowns.length; i++)\n\t\t{\n\t\t\tlet openDropdown = dropdowns[i];\n\t\t\tif (openDropdown.classList.contains('show'))\n\t\t\t{\n\t\t\t\tif (openDropdown.classList.contains('dropdown-dialog'))\n\t\t\t\t{ // dropdown-dialog's should be harder to close\n\t\t\t\t\tif (!openDropdown.contains(event.target))\n\t\t\t\t\t\tlm.ToggleDropdown(openDropdown);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tlm.ToggleDropdown(openDropdown);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Adds a function to be called on the windows onload event. The benefit of using this function is that multiple functions can\n * be attached to the onload event, just by caling AddLoadEvent multiple times with each of the functions you want to run.\n * @param {function} func A function to call when the HTML page gets loaded.\n * @param {boolean} [makeFirst=false] If true, this callback function will be called before all others. This is used to set up the built-in console, but can be tricky and should mostly be avoided.\n */\nlm.AddLoadEvent = function(func, makeFirst)\n{\n\tlet oldonload = window.onload;\n\tif (typeof(window.onload) != 'function')\n\t{\n\t\twindow.onload = func;\n\t}\n\telse\n\t{\n\t\twindow.onload = function()\n\t\t{\n\t\t\tif (makeFirst)\n\t\t\t\tfunc();\n\n\t\t\tif (oldonload)\n\t\t\t{\n\t\t\t\toldonload();\n\t\t\t}\n\n\t\t\tif (!makeFirst)\n\t\t\t\tfunc();\n\t\t}\n\t}\n\n\t// Close any dropdowns if the user clicks outside of them\n\twindow.onmousedown = _dismissDropdownsOnClick;\n\tif ('ontouchstart' in window)\n\t\twindow.ontouchstart = _dismissDropdownsOnClick;\n}\n\n/**\n * Converts an object from one type to another. The type to convert to is passed in as a string.\n * Under the hood, a new object is created and the properties of the old object are copied to the new one.\n * @param {Object} existingObj A object to be converted.\n * @param {string} typeStr A string containing the type of object to convert it to.\n * @returns {Object} A new object of type \"typeStr\".\n */\nlm.ConvertObjectType = function(existingObj, typeStr)\n{\n\tlet obj = eval(\"new \" + typeStr + \"();\");\n\tfor (let prop in existingObj)\n\t{\n\t\tif (existingObj.hasOwnProperty(prop))\n\t\t{\n\t\t\tobj[prop] = existingObj[prop];\n\t\t}\n\t}\n\treturn obj;\n}\n\n/**\n * Restores an object (and any objects that it contains, recursively) to its \"natural\" object type.\n * You will likely never call this yourself, but it is used when Unserializing object data.\n * @param {Object} arg An object to be restored.\n * @returns {Object} A new object, or the same object if nothing needed to be changed.\n */\nlm.RestoreObjectTypes = function(arg)\n{\n\tlet result = arg;\n\n\tif (result == null || typeof result != \"object\")\n\t\treturn result;\n\n\tif (result._lmType_)\n\t\tresult = lm.ConvertObjectType(result, result._lmType_);\n\n\tfor (let prop in result)\n\t{\n\t\tif (prop.slice(0, 3) == \"rt_\" || prop.slice(0, 4) == \"_rt_\")\n\t\t\tcontinue; // skip runtime (rt_) properties\n\t\tif (result.hasOwnProperty(prop))\n\t\t{\n\t\t\tif (typeof result[prop] == \"object\")\n\t\t\t{\n\t\t\t\tresult[prop] = lm.RestoreObjectTypes(result[prop]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Tags an object (and any objects that it contains, recursively) with its \"natural\" object type.\n * You will likely never call this yourself, but it is used when Serializing object data.\n * @param {Object} arg An object to be restored.\n * @returns {Object} A new object, or the same object if nothing needed to be changed.\n */\nlm.TagObjectTypes = function(arg)\n{\n\tlet result = arg;\n\n\tif (result == null || typeof result != \"object\")\n\t\treturn result;\n\n\tresult._lmType_ = result.constructor.name;\n\n\tfor (let prop in result)\n\t{\n\t\tif (prop.slice(0, 3) == \"rt_\" || prop.slice(0, 4) == \"_rt_\")\n\t\t\tcontinue; // skip runtime (rt_) properties\n\t\tif (result.hasOwnProperty(prop))\n\t\t{\n\t\t\tif (typeof result[prop] == \"object\")\n\t\t\t{\n\t\t\t\tresult[prop] = lm.TagObjectTypes(result[prop]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Operates very similarly to JSON.stringify. Takes an object and serializes it as a string.\n * The difference from JSON.stringify is that the objects to be serialized may contain a special parameter\n * named \"_lmType_\". When Unserializing, such objects will be restored to their \"natural\" object type,\n * rather than being just flat, dumb objects as JSON would give you.\n * UPDATE: It is no longer necessary to tag objects with \"_lmType_\" - this gets handled automatically\n * @param {Object} arg An object or simple data that is to be serialized. If the object has a PreSerialize()\n * function, it will get called before the object is serialized.\n * @returns {string} A serialized string representing the argument.\n */\nlm.Serialize = function(arg)\n{\n\tif (arg.PreSerialize)\n\t\targ.PreSerialize();\n\tlm.TagObjectTypes(arg);\n\treturn JSON.stringify(arg, function(key, value)\n\t{\n\t\tif (key.slice(0, 3) == \"rt_\" || key.slice(0, 4) == \"_rt_\")\n\t\t{\n\t\t\t// Skip any values name rt_something or _rt_something\n\t\t\t// These are intended to be runtime values, and not something that should be serialized.\n\t\t\t// For example, suppose you have a complex graph of objects that point to each other.\n\t\t\t// You could end up with recursive, neverending serialization.\n\t\t\t// rt_parent could be used to hold a pointer to a parent object that doesn't need to be serialized.\n\t\t\t// (The _rt_something variation is intended for private variables.)\n\t\t\treturn undefined;\n\t\t}\n\t\treturn value;\n\t});\n\n\t// Below is a method of serializing functions.\n\t// But this only works if the function has been attached directly to the object, and not as part of a prototype.\n\t// This might be useful - maybe as an option passed to this function.\n\t/*return JSON.stringify(obj, function(key, value)\n\t{\n\t\treturn (typeof value === \"function\") ? value.toString() : value;\n\t});*/\n}\n\n/**\n * Operates very similarly to JSON.parse. Takes a string and parses it into an object.\n * The difference from JSON.parse is that the objects being unserialized may contain a special parameter\n * named \"_lmType_\". When Unserializing, such objects will be restored to their \"natural\" object type,\n * rather than being just flat, dumb objects as JSON would give you.\n * @param {string} str A string to be unserialized.\n * @returns {Object} An object. If the object has a PostUnserialize()\n * function, it will get called after the object is unserialized.\n */\nlm.Unserialize = function(str)\n{\n\tlet result = JSON.parse(str);\n\n\t// Below is a method of unserializing functions.\n\t// But this only works if the function has been attached directly to the object, and not as part of a prototype.\n\t// This might be useful - if I turn enable it in the Serialize function above I'll need to turn it on here as well.\n\t/*let result = JSON.parse(str, function(key, value)\n\t{\n\t\tif (typeof value != 'string')\n\t\t\treturn value;\n\t\treturn (value.substring(0,8) == 'function') ? eval('('+value+')') : value;\n\t});*/\n\n\tresult = lm.RestoreObjectTypes(result);\n\tif (result.PostUnserialize)\n\t\tresult.PostUnserialize();\n\treturn result;\n}\n\n/**\n * Clones an object to make a totally new, independent copy of it.\n * If the object has its own clone method, that gets called.\n * @param {Object} o An object to be cloned. (Can be a number, string, array, or other things too.)\n * @returns {Object} A copy of the incoming object.\n */\nlm.Clone = function(o)\n{\n\tif (typeof(o) == \"object\")\n\t{\n\t\tif (Array.isArray(o))\n\t\t{\n\t\t\tlet tempObj = {\n\t\t\t\tarrayValue: o\n\t\t\t};\n\t\t\tlet json = lm.Serialize(tempObj);\n\t\t\tlet copyObj = lm.Unserialize(json);\n\t\t\treturn copyObj.arrayValue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (typeof(o.Clone) == \"function\")\n\t\t\t\treturn o.Clone();\n\t\t\telse if (typeof(o.clone) == \"function\")\n\t\t\t\treturn o.clone();\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet json = lm.Serialize(o);\n\t\t\t\tlet copyObj = lm.Unserialize(json);\n\t\t\t\treturn copyObj;\n\t\t\t}\n\t\t}\n\t}\n\telse if (typeof(o) == \"string\")\n\t{\n\t\treturn o.slice();\n\t}\n\treturn o;\n}\n\n/**\n * Loads a JSON file asynchronously and calls a callback function once it's ready.\n * @param {string} url An object to be cloned. (Can be a number, string, array, or other things too.)\n * @param {function} callback An object to be cloned. (Can be a number, string, array, or other things too.)\n * \n * Sample Usage:\n\tlm.LoadJSON(\"json/Config.json\", function(response)\n\t{\n\t\t// response is a JavaScript object, it has already been parsed from the JSON\n\t\tlm.Log(response);\n\t});\n */\nlm.LoadJSON = function(url, callback)\n{\n\tlet xobj = new XMLHttpRequest();\n\txobj.overrideMimeType(\"application/json\");\n\txobj.open('GET', url, true);\n\txobj.onreadystatechange = function()\n\t{\n\t\tif (xobj.readyState == 4 && xobj.status == \"200\")\n\t\t{\n\t\t\t// Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode\n\t\t\tlet parsedObject = lm.Unserialize(xobj.responseText);\n\t\t\tcallback(parsedObject);\n\t\t}\n\t};\n\txobj.send(null);  \n}\n\n//***********************************************************************************\n//*** More Math Functions\n//***********************************************************************************\n\n/*\n\t// interpolation functions\n\tstatic real Slerp(real percent, real min, real max);\n\tstatic real Cerp(real percent, real min, real max, const LM_Vector2 &norm1, const LM_Vector2 &norm2);\n\tstatic real SplineInterp(real xVal, const LM_Vector2 &min, const LM_Vector2 &inA, const LM_Vector2 &inB, const LM_Vector2 &max);\n\tstatic real SplineInterp2(real xVal, const LM_Vector2 &preVal, const LM_Vector2 &min, const LM_Vector2 &max, const LM_Vector2 &postVal);\n\tstatic real SplineInterp3(real xVal, const LM_Vector2 &preVal, const LM_Vector2 &min, const LM_Vector2 &max, const LM_Vector2 &postVal);\n\tstatic real SplineInterp4(real xVal, const LM_Vector2 &preVal, const LM_Vector2 &min, const LM_Vector2 &max, const LM_Vector2 &postVal);\n\n\t// bezier curves\n\tstatic LM_Vector2 BezierPoint(real percent, LM_Vector2 *ctrlPts);\n\tstatic LM_Vector3 BezierPoint(real percent, LM_Vector3 *ctrlPts);\n\tstatic LM_Vector2 BezierTangent(real percent, LM_Vector2 *ctrlPts);\n\tstatic LM_Vector3 BezierTangent(real percent, LM_Vector3 *ctrlPts);\n\n\t// line segment intersection test\n\tstatic bool IntersectLineSegments(LM_Vector2 p1, LM_Vector2 p2, LM_Vector2 p3, LM_Vector2 p4, LM_Vector2 &result);\n*/\n\n//***********************************************************************************\n//*** Stopwatch Object\n//***********************************************************************************\n\n/**\n * This class is used to keep track of real-world timing. It can track duration, elpased time, looping, and can optionally snap to a fixed frame rate.\n */\nclass lm_Stopwatch\n{\n    /**\n     * Create a Stopwatch object.\n     */\n\tconstructor()\n\t{\n\t\tthis.active = false;\n\t\tthis.elapsedTime = 0;\n\t\tthis.startTime = 0;\n\t}\n\n\t/**\n\t * Synchronizes the start time of a stopwatch to a second one.\n\t * The two stopwatches may have separate loop or fps parameters, just their start times and raw elapsed time will be in sync.\n\t * @param {lm_Stopwatch} s2 A stopwatch to synchronize to.\n\t */\n\tSynchronize(s2)\n\t{\n\t\tthis.startTime = s2.startTime;\n\t\tthis.elapsedTime = s2.elapsedTime;\n\t}\n\n\t/**\n\t * Starts the stopwatch timing.\n\t */\n\tStart()\n\t{\n\t\tthis.startTime = (new Date()).getTime();\n\t\tthis.elapsedTime = 0;\n\t\tthis.active = true;\n\t}\n\n\t/**\n\t * Stops the stopwatch timing.\n\t */\n\tStop()\n\t{\n\t\tthis.elapsedTime = this.ElapsedTime();\n\t\tthis.active = false;\n\t}\n\n\t/**\n\t * Resets the start time of this stopwatch to match the given elapsed time.\n\t * @param {number} elapsedTime The desired elapsed time.\n\t */\n\tSetElapsedTime(elapsedTime)\n\t{\n\t\tthis.elapsedTime = elapsedTime;\n\t\tthis.startTime = (new Date()).getTime() - this.elapsedTime * 1000.0;\n\t}\n\n\t/**\n\t * Marks the current elapsed time.\n\t * All further calls to ElapsedTime will return the same result, until ResumeLap is called.\n\t * Not really the same as stopping the Stopwatch - it can be resumed with ResumeLap.\n\t */\n\tMarkLap()\n\t{\n\t\tthis.elapsedTime = this.ElapsedTime();\n\t\tthis.active = false;\n\t}\n\n\t/**\n\t * Continues the Stopwatch running after a call to MarkLap.\n\t */\n\tResumeLap()\n\t{\n\t\tthis.active = true;\n\t}\n\n\t/**\n\t * Returns the elapsed time in seconds.\n\t * If a frame rate has been set, snap to the closest frame.\n\t * @returns {number} The elapsed time in seconds.\n\t */\n\tElapsedTime()\n\t{\n\t\tif (this.active)\n\t\t{\n\t\t\tthis.elapsedTime = (new Date().getTime() - this.startTime) / 1000.0;\n\t\t\tif (this.loopTime)\n\t\t\t{\n\t\t\t\tlet loopFraction = this.elapsedTime % this.loopTime;\n\t\t\t\tif (this.backAndForth)\n\t\t\t\t{\n\t/*\n\tThis version goes back and forth linearly.\n\tIt works fine.\n\tBut I thought maybe it would look better to smoothly transition back and forth.\n\n\t\t\t\t\tif (lm.Floor(this.elapsedTime / this.loopTime) % 2 != 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.elapsedTime = this.loopTime - loopFraction;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.elapsedTime = loopFraction;\n\t*/\n\t\t\t\t\tif (lm.Floor(this.elapsedTime / this.loopTime) % 2 != 0)\n\t\t\t\t\t{\n\t\t\t\t\t\t//this.elapsedTime = this.loopTime - loopFraction;\n\t\t\t\t\t\tthis.elapsedTime = lm.Slerp((this.loopTime - loopFraction) / this.loopTime, 0.0, this.loopTime);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.elapsedTime = lm.Slerp(loopFraction / this.loopTime, 0.0, this.loopTime);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tthis.elapsedTime = loopFraction;\n\t\t\t}\n\t\t}\n\t\tif (this.fps)\n\t\t{\n\t\t\tlet frame = lm.Floor(this.elapsedTime * this.fps);\n\t\t\treturn frame / this.fps;\n\t\t}\n\t\treturn this.elapsedTime;\n\t}\n\n\t/**\n\t * Sets the desired frame rate for reporting elapsed time.\n\t * The elapsed time will then be returned still in seconds, but as values that are \"snapped\" to frames.\n\t * @param {number} fps The desired frame rate. For example, 12, 24, 30, etc. Set to 0 to disable frame rate snapping.\n\t */\n\tSetFrameRate(fps)\n\t{\n\t\tthis.fps = fps;\n\t}\n\n\t/**\n\t * Returns the current frame (assumes a frame rate has been set).\n\t * @returns {number} The current frame.\n\t */\n\tCurrentFrame()\n\t{\n\t\tif (this.fps)\n\t\t{\n\t\t\tlet secs = this.ElapsedTime();\n\t\t\treturn secs * this.fps;\n\t\t}\n\t\telse\n\t\t\treturn 0;\n\t}\n\n\t/**\n\t * Set a loop duration for this stopwatch.\n\t * When querying the elapsed time, if it goes past the loop time, the reported elapsed time will loop back around to 0.\n\t * @param {number} loopTime The duration, in seconds, of the loop.\n\t * @param {boolean} [backAndForth=false] Whether the stopwatch should loop back to the beginning, or bounce back and forth.\n\t */\n\tSetLoopDuration(loopTime, backAndForth)\n\t{\n\t\tthis.loopTime = loopTime;\n\t\tbackAndForth = lm.Default(backAndForth, false);\n\t\tthis.backAndForth = backAndForth;\n\t\tthis.elapsedTime = this.ElapsedTime();\n\t}\n\n\t/**\n\t * Returns the elapsed time as a percentage of the loop cycle.\n\t * (Only really useful if looping is turned on.)\n\t * This can be useful for progressing an animation from 0.0 to 1.0, regardless of the duration of the loop.\n\t * If looping is not on, just return 0.0.\n\t * @returns {number} The loop percentage from 0 to 1.\n\t */\n\tElapsedLoopPercentage()\n\t{\n\t\tif (this.loopTime)\n\t\t\treturn this.ElapsedTime() / this.loopTime;\n\t\telse\n\t\t\treturn 0.0;\n\t}\n}\n\nlm.Stopwatch = lm_Stopwatch;\n\n//***********************************************************************************\n//*** RGB Color Object\n//***********************************************************************************\n\n/**\n * This class represents an rgba color.\n */\nclass lm_RgbColor\n{\n    /**\n     * Create an RgbColor object.\n\t * @param {number} [r=255] The red value of the color.\n\t * @param {number} [g=255] The green value of the color.\n\t * @param {number} [b=255] The blue value of the color.\n\t * @param {number} [a=255] The alpha value of the color.\n     */\n\tconstructor(r, g, b, a)\n\t{\n\t\tif (typeof(r) == \"string\")\n\t\t{ // load from a CSS variable\n\t\t\tlet styles = getComputedStyle(document.documentElement);\n\t\t\tlet styleCol = lm.RgbStringToRgbColor(styles.getPropertyValue(r));\n\t\t\tthis.r = styleCol.r;\n\t\t\tthis.g = styleCol.g;\n\t\t\tthis.b = styleCol.b;\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * The red component.\n\t\t */\n\t\tthis.r = lm.Default(r, 255);\n\t\t/**\n\t\t * The green component.\n\t\t */\n\t\tthis.g = lm.Default(g, 255);\n\t\t/**\n\t\t * The blue component.\n\t\t */\n\t\tthis.b = lm.Default(b, 255);\n\t\t/**\n\t\t * The alpha component.\n\t\t */\n\t\tthis.a = lm.Default(a, 255);\n\t}\n\n    /**\n     * Returns a new color object, with values in the 0..255 range.\n\t */\n\tFloatToIntegerColor()\n\t{\n\t\tlet c = new lm.RgbColor();\n\t\tc.r = lm.Clamp(lm.Round(this.r * 255.0), 0, 255);\n\t\tc.g = lm.Clamp(lm.Round(this.g * 255.0), 0, 255);\n\t\tc.b = lm.Clamp(lm.Round(this.b * 255.0), 0, 255);\n\t\tc.a = lm.Clamp(lm.Round(this.a * 255.0), 0, 255);\n\t\treturn c;\n\t}\n\n    /**\n     * Returns a new color object, with values in the 0..1 range.\n\t */\n\tIntegerToFloatColor()\n\t{\n\t\tlet c = new lm.RgbColor();\n\t\tc.r = lm.Clamp(this.r / 255.0, 0.0, 1.0);\n\t\tc.g = lm.Clamp(this.g / 255.0, 0.0, 1.0);\n\t\tc.b = lm.Clamp(this.b / 255.0, 0.0, 1.0);\n\t\tc.a = lm.Clamp(this.a / 255.0, 0.0, 1.0);\n\t\treturn c;\n\t}\n\n    /**\n     * Returns a Pixi-friendly, hex-style packed color value.\n\t */\n\tPixiColor()\n\t{\n\t\treturn (((this.r % 256) << 16) + ((this.g % 256) << 8) + (this.b % 256));\n\t}\n\n\tHTMLColor()\n\t{\n\t\treturn \"rgba(\" + this.r + \",\" + this.g + \",\" + this.b + \",\" + this.a + \")\";\n\t}\n\n\t/**\n\t * Duplicates this object.\n\t * @returns {lm_RgbColor} A copy of this object.\n\t */\n\tClone()\n\t{\n\t\treturn new lm.RgbColor(this.r, this.g, this.b, this.a);\n\t}\n\n\t/**\n\t * Returns an object with h,s,v,a properties.\n\t * @returns {Object} An object representing the color in HSV color mode.\n\t */\n\tToHSVColor()\n\t{\n\t\tlet result = { a: this.a };\n\t\t\n\t\tresult.v = lm.Max(this.r, this.g);\n\t\tresult.v = lm.Max(result.v, this.b);\n\t\tif (result.v == 0)\n\t\t{\n\t\t\tresult.s = 0;\n\t\t\tresult.h = 0;\n\t\t\treturn result;\n\t\t}\n\t\t\n\t\tlet f = 1.0 / 255.0;\n\t\tlet rf = this.r * f;\n\t\tlet gf = this.g * f;\n\t\tlet bf = this.b * f;\n\t\t\n\t\tlet min = lm.Min(rf, gf);\n\t\tmin = lm.Min(min, bf);\n\t\tlet max = lm.Max(rf, gf);\n\t\tmax = lm.Max(max, bf);\n\t\n\t\tlet delta = max - min;\n\t\tif (delta < lm.TINY)\n\t\t{\n\t\t\tresult.h = 0;\n\t\t\tresult.s = 0;\n\t\t\treturn result;\n\t\t}\n\t\tf = delta / max;\n\t\tf *= 255.0;\n\t\tresult.s = lm.Clamp(lm.Round(f), 0, 255);\n\t\t\n\t\tif (this.r == result.v) // r == max\n\t\t\tf = (gf - bf) / delta; // between yellow & magenta\n\t\telse if (this.g == result.v) // g == max\n\t\t\tf = 2.0 + (bf - rf) / delta; // between cyan & yellow\n\t\telse // this.b == max\n\t\t\tf = 4.0 + (rf - gf) / delta; // between magenta & cyan\n\t\tf *= 60.0;\n\t\tif (f < 0.0)\n\t\t\tf += 360.0;\n\t\tf = 255.0 * f / 360.0;\n\t\tresult.h = lm.Clamp(lm.Round(f), 0, 255);\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Initializes this object based on an HSV color.\n\t * @param {Object} An object with h,s,v,a values.\n\t */\n\tFromHSVColor(hsv)\n\t{\t\t\n\t\tthis.a = hsv.a;\n\n\t\tif (hsv.s == 0)\n\t\t{ // grayscale\n\t\t\tthis.r = this.g = this.b = hsv.v;\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tlet f = 1.0 / 255.0;\n\t\tlet hf = hsv.h * f;\n\t\thf *= 360.0;\n\t\tlet sf = hsv.s * f;\n\t\tlet vf = hsv.v * f;\n\t\t\n\t\thf /= 60.0; // sector 0 to 5\n\t\tlet i = lm.Floor(hf);\n\t\tf = hf - i; // factorial part of h\n\t\tlet p = vf * (1.0 - sf);\n\t\tlet q = vf * (1.0 - sf * f);\n\t\tlet t = vf * (1.0 - sf * (1.0 - f));\n\n\t\tlet rf, gf, bf;\n\n\t\tswitch (i)\n\t\t{\n\t\t\tcase 0:\n\t\t\t\trf = vf;\n\t\t\t\tgf = t;\n\t\t\t\tbf = p;\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\trf = q;\n\t\t\t\tgf = vf;\n\t\t\t\tbf = p;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\trf = p;\n\t\t\t\tgf = vf;\n\t\t\t\tbf = t;\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\trf = p;\n\t\t\t\tgf = q;\n\t\t\t\tbf = vf;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\trf = t;\n\t\t\t\tgf = p;\n\t\t\t\tbf = vf;\n\t\t\t\tbreak;\n\t\t\tdefault: // case 5:\n\t\t\t\trf = vf;\n\t\t\t\tgf = p;\n\t\t\t\tbf = q;\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\trf *= 255.0;\n\t\tgf *= 255.0;\n\t\tbf *= 255.0;\n\t\tthis.r = lm.Clamp(lm.Round(rf), 0, 255);\n\t\tthis.g = lm.Clamp(lm.Round(gf), 0, 255);\n\t\tthis.b = lm.Clamp(lm.Round(bf), 0, 255);\n\t}\n}\n\nlm.RgbColor = lm_RgbColor;\n\n//***********************************************************************************\n//*** Animation Object\n//***********************************************************************************\n\n/**\n * This class represents a short-lived animation.\n * \n * Example usage:\n\tlet animator = new lm.Animation(duration, 0, \"elastic\");\n\tanimator.Run(function(percent, done)\n\t{\n\t\tthis.camera.position.x = lm.Lerp(percent, oldPosition.x, newPosition.x);\n\t\tthis.camera.position.y = lm.Lerp(percent, oldPosition.y, newPosition.y);\n\t\tthis.camera.position.z = lm.Lerp(percent, oldPosition.z, newPosition.z);\n\t\tlet target = oldTarget.lerp(newTarget, percent);\n\t\tthis.camera.lookAt(target);\n\t\tthis.camera.updateProjectionMatrix();\n\t\tthis.camControls.target = target;\n\t\tthis.camControls.update();\n\t\tthis.QueueRender();\n\t\tif (done)\n\t\t\tthis.cameraAnimating = false;\n\t}.bind(this));\n */\nclass lm_Animation\n{\n    /**\n     * Create an Animation object.\n\t * @param {number} [duration=5.0] The duration of the animation in seconds.\n\t * @param {number} [fps=0.0] The desired frame rate (0.0 for as fast as possible).\n\t * @param {string} [interpolation=\"linear\"] Interpolation mode (linear, smooth, bounce, elastic).\n     */\n\tconstructor(duration, fps, interpolation)\n\t{\n\t\t/**\n\t\t * The duration of the animation in seconds.\n\t\t */\n\t\tthis.duration = lm.Default(duration, 5.0);\n\t\t/**\n\t\t * The desired frame rate.\n\t\t */\n\t\tthis.fps = lm.Default(fps, 0);\n\t\t/**\n\t\t * Interpolation mode.\n\t\t */\n\t\tthis.interpolation = lm.Default(interpolation, \"linear\");\n\t}\n\n    /**\n     * Returns a Pixi-friendly, hex-style packed color value.\n\t */\n\tRun(callbackFunction)\n\t{\n\t\tif (this.duration <= 0)\n\t\t{\n\t\t\tcallbackFunction(1);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.callbackFunction = callbackFunction;\n\t\tthis.timer = new lm.Stopwatch();\n\t\tif (this.fps > 0)\n\t\t{\n\t\t\tthis.timer.SetFrameRate(this.fps);\n\t\t\tthis.prevFrame = -1;\n\t\t}\n\t\tthis.timer.Start();\n\t\trequestAnimationFrame(this._AnimationCallback.bind(this));\n\t}\n\n\t_AnimationCallback()\n\t{\n\t\tlet doCallback = false;\n\t\tlet percentage = this.timer.ElapsedTime() / this.duration;\n\t\tif (this.fps > 0)\n\t\t{\n\t\t\tlet frame = this.timer.CurrentFrame();\n\t\t\tif (frame > this.prevFrame)\n\t\t\t{\n\t\t\t\tdoCallback = true;\n\t\t\t\tthis.prevFrame = frame;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tdoCallback = true;\n\t\tif (doCallback)\n\t\t{\n\t\t\tlet done = false;\n\t\t\tif (percentage >= 1.0)\n\t\t\t\tdone = true;\n\t\t\tlet f = lm.Clamp(percentage, 0.0, 1.0);\n\t\t\tif (!done)\n\t\t\t{\n\t\t\t\tswitch (this.interpolation)\n\t\t\t\t{\n\t\t\t\t\tcase \"linear\":\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// don't need to do anything\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"smooth\":\n\t\t\t\t\t\tf = lm.Slerp(f, 0.0, 1.0);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"elastic\":\n\t\t\t\t\t\tf = this._ElasticPercent(f, 3, 0, 0.25);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"bounce\":\n\t\t\t\t\t\tf = this._BouncePercent(f, 4, 0.3);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.callbackFunction(f, done);\n\t\t}\n\t\tif (percentage < 1.0)\n\t\t\trequestAnimationFrame(this._AnimationCallback.bind(this));\n\t}\n\n\t_ElasticPercent(percent, bounceCount, mode, bounceScale)\n\t{\n\t\t// mode 0:forward, 1:backward, 2:bi-directional (bi-directional is not yet supported)\t\n\t\tif (bounceCount < 1)\n\t\t\tbounceCount = 4;\n\t\tif (bounceScale < lm.TINY)\n\t\t\tbounceScale = 1.0;\n\t\n\t\tbounceScale *= 3.0;\n\t\t\n\t\tlet freq = lm.PI2 * bounceCount;\n\t\tif (bounceCount & 1)\n\t\t\tfreq = lm.PI / 2.0 + (lm.PI2) * (bounceCount + 1) / 2.0 - lm.PI;\n\t\telse\n\t\t\tfreq = lm.PI / 2.0 + (lm.PI2) * bounceCount / 2.0;\n\t\t\n\t\tif (mode == 1)\n\t\t\tpercent = 1.0 - percent;\n\t\n\t\tlet base = 2.0;\n\t\t// if (bounceScale > 1.0001)\n\t\t// \tbase -= bounceScale / 10.0;\n\t\t// else if (bounceScale < 0.9999)\n\t\t// \tbase += (1.0 - bounceScale);\n\t\t// if (base < 1.0)\n\t\t// \tbase = 1.0;\n\t\tpercent = Math.pow(base, -10.0 * percent) * Math.sin(percent * freq + lm.PI * 1.5) * bounceScale + 1.0;\n\t\n\t\tif (mode == 1)\n\t\t\tpercent = 1.0 - percent;\n\t\treturn percent;\n\t}\n\t\n\t_BouncePercent(percent, bounceCount, bounceScale)\n\t{\n\t\tlet i;\n\t\tlet cutoff;\n\t\tlet scaleReduction = bounceScale; // 0.5 and 0.3 are reasonable values\n\t\tlet scale = 1.0;\n\t\n\t\tif (bounceCount < 1)\n\t\t\tbounceCount = 3;\n\t\tif (scaleReduction < lm.TINY)\n\t\t\tscaleReduction = 0.5;\n\t\tcutoff = Math.sqrt(1.0 / bounceCount);\n\t\tif (percent <= cutoff / 2.0)\n\t\t{\n\t\t\tpercent = 0.5 + (percent / (cutoff / 2.0)) / 2.0;\n\t\t}\n\t\telse\n\t\t{\n\t\t\ti = 1;\n\t\t\tpercent = (percent - cutoff / 2.0) / (1.0 - cutoff / 2.0);\n\t\t\tscale *= scaleReduction;\n\t\t\twhile (i < bounceCount)\n\t\t\t{\n\t\t\t\tif (percent <= cutoff)\n\t\t\t\t{\n\t\t\t\t\tpercent = percent / cutoff;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpercent = (percent - cutoff) / (1.0 - cutoff);\n\t\t\t\t}\n\t\t\t\tscale *= scaleReduction;\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\t\tpercent = percent * 2.0 - 1.0;\n\t\tpercent = percent * percent;\n\t\treturn 1.0 - (1.0 - percent) * scale;\n\t}\t\n}\n\nlm.Animation = lm_Animation;\n\n//***********************************************************************************\n//*** Custom Console Object\n//***********************************************************************************\n\n/**\n * The global console object. You usually don't need to access this directly, unless you want to show or hide the console.\n * @type {lm_Console}\n */\nlm.console = null;\n\n/**\n * Prints data to the console. A replacement for console.log.\n * The console *will not* be shown if it isn't already showing.\n * @param {any} value Pass in any combination of JavaScript types.\n */\nlm.Log = function(value)\n{\n\tif (lm.console)\n\t{\n\t\tif (lm.console.consoleShowing)\n\t\t\tlm.console.LogMsg.apply(lm.console, arguments);\n\t\telse\n\t\t\tconsole._originalLog_.apply(null, arguments);\n\t}\n\telse\n\t{\n\t\tconsole.log.apply(null, arguments);\n\t}\n}\n\n/**\n * Prints error data to the console. A replacement for console.log.\n * The console *will* be shown if it isn't already showing.\n * @param {any} value Pass in any combination of JavaScript types.\n */\nlm.ErrorLog = function(value)\n{\n\tif (lm.console)\n\t{\n\t\tif (!lm.console.consoleShowing && !lm.console.browserConsoleShowing)\n\t\t\tlm.console.Show();\n\t\tlm.console.LogMsgError.apply(lm.console, arguments);\n\t}\n\telse\n\t{\n\t\tconsole.log.apply(null, arguments);\n\t}\n}\n\n/**\n * Prints data to the console, but only in Debug mode. A replacement for console.log.\n * The console *will* be shown if it isn't already showing.\n * @param {any} value Pass in any combination of JavaScript types.\n */\nlm.DebugLog = function(value)\n{\n\tif (!lm.DEBUG)\n\t\treturn;\n\tif (lm.console)\n\t{\n\t\tif (!lm.console.consoleShowing && !lm.console.browserConsoleShowing)\n\t\t\tlm.console.Show();\n\t\tlm.console.LogMsg.apply(lm.console, arguments);\n\t}\n\telse\n\t{\n\t\tconsole.log.apply(null, arguments);\n\t}\n}\n\n/**\n * Prints data to the console. A replacement for console.log.\n * The console *will* be shown if it isn't already showing.\n * @param {any} value Pass in any combination of JavaScript types.\n */\nlm.VerboseLog = function(value)\n{\n\tif (lm.console)\n\t{\n\t\tif (!lm.console.consoleShowing && !lm.console.browserConsoleShowing)\n\t\t\tlm.console.Show();\n\t\tlm.console.LogMsg.apply(lm.console, arguments);\n\t}\n\telse\n\t{\n\t\tconsole.log.apply(null, arguments);\n\t}\n}\n\n/**\n * Call this when an error occurs.\n * It will both print to the console, and throw a generic JavaScript error exception.\n * The console *will* be shown if it isn't already showing.\n * An exception will only be thrown in DEBUG code.\n * Instead of calling this, it may be more useful to just throw an error, like this:\n * throw new Error(\"error message\");\n * throw new RangeError(\"error messgae\");\n * throw new TypeError(\"error messgae\");\n * @param {any} value Pass in any combination of JavaScript types.\n */\nlm.Error = function(value)\n{\n\tlm.VerboseLog(value);\n\n\tif (lm.DEBUG)\n\t{\n\t\tlet s = value;\n\t\tif (arguments.length > 1)\n\t\t{\n\t\t\ts = \"\";\n\t\t\tfor (let i = 0; i < arguments.length; i++)\n\t\t\t{\n\t\t\t\tif (i > 0)\n\t\t\t\t\ts += ' ';\n\t\t\t\ts += arguments[i];\n\t\t\t}\n\t\t}\n\t\telse if (arguments.length == 1)\n\t\t\ts = arguments[0];\n\t\tthrow new Error(s);\n\t}\n}\n\n/**\n * (Enabled in Debug builds only.)\n * Call this to make sure some condition is true.\n * If not, an error message will be printed out, and an error will be thrown.\n * @param {boolean} condition A condition that we expect to be true.\n * @param {string} message A message to print out if the condition is false.\n */\nlm.Assert = function(condition, message)\n{\n\tif (!lm.DEBUG)\n\t\treturn;\n\tif (!condition)\n\t{\n\t\tlm.ErrorLog(condition);\n\t\tthrow new Error(message);\n\t}\n}\n\n/**\n * My custom console class.\n * Works with the native browser console, or can show a custom console UI.\n */\nclass lm_Console\n{\n    /**\n     * Create a Console object. User code should never have to call this - the console will be created automatically.\n     */\n\tconstructor()\n\t{\n\t\tif (lm.console)\n\t\t{\n\t\t\tlm.DebugLog(\"!!! Console already initialized. Don't do this twice. !!!\");\n\t\t\treturn;\n\t\t}\n\n\t\tlm.console = this;\n\n\t\tthis.consoleShowing = false;\n\t\tthis.browserConsoleShowing = false;\n\t\tthis.muted = false;\n\t\tthis.consoleDiv = null;\n\n\t\tconsole._originalLog_ = console.log;\n\t\tconsole.log = this.LogMsg.bind(this);\n\n        // This trick doesn't work anymore in Chrome\n\t\t// if (!lm.IsMobileDevice())\n\t\t// {\n\t\t// \t// Test if the console is already open. If so, don't make your own custom console.\n\t\t// \t// This test is kind of finicky - it relies on the idea that an object's toString method only gets called if it's trying to be printed.\n\t\t// \t// https://stackoverflow.com/questions/7798748/find-out-whether-chrome-console-is-open/30638226#30638226\n\t\t// \tlet devtools = /./; // This is a simple regular expression. I'm not sure why a RegExp and not an ordinary Object, but it seems like it has to be a RegExp.\n\t\t// \tdevtools.toString = function()\n\t\t// \t{\n\t\t// \t\tthis.browserConsoleShowing = true;\n\t\t// \t}.bind(this);\n\t\t// \tconsole._originalLog_(\"Testing for browser console... %c\", devtools);\n\t\t// \t//console._originalLog_('%c', devtools);\n\t\t// }\n\n\t\twindow.addEventListener(\"error\", function(error)\n\t\t{\n\t\t\t//alert('Error message: '+error.message+'nURL: '+error.filename+'nLine Number: '+error.lineno)\n\t\t\tthis.LogError(error);\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Shows the custom console UI.\n\t * Normally you don't have to call this - it will happen automatically as needed.\n\t */\n\tShow()\n\t{\n\t\tif (this.consoleShowing || this.browserConsoleShowing)\n\t\t\treturn;\n\n\t\tthis.consoleDiv = document.createElement(\"div\");\n\t\tthis.consoleDiv.style.position = \"absolute\";\n\t\tthis.consoleDiv.style.bottom = \"0px\";\n\t\tthis.consoleDiv.style.left = \"0px\";\n\t\tthis.consoleDiv.style.fontFamily = \"dejavu sans mono, monospace\";\n\t\tthis.consoleDiv.style.fontSize = \"11px\";\n\t\tthis.consoleDiv.style.cursor = \"default\";\n\t\tthis.consoleDiv.style.backgroundColor = \"rgba(203, 203, 193, 0.5)\";\n\t\tthis.consoleDiv.style.width = \"100%\";\n\t\tthis.consoleDiv.style.height = \"200px\";\n\t\tthis.consoleDiv.style.borderTop = \"1px solid black\";\n\t\tthis.consoleDiv.style.overflow = \"scroll\";\n\t\tthis.consoleDiv.style.letterSpacing = \"0px\";\n\t\tthis.consoleDiv.style.zIndex = \"10000\";\n\n\t\tdocument.body.appendChild(this.consoleDiv);\n\n\t\tthis.consoleShowing = true;\n\t}\n\n\t/**\n\t * Hides the custom console UI.\n\t */\n\tHide()\n\t{\n\t\tif (!this.consoleShowing)\n\t\t\treturn;\n\t\tdocument.body.removeChild(this.consoleDiv);\n\t}\n\n\t/**\n\t * Disables console logging.\n\t * @param {boolean} muted Mute or un-mute the console.\n\t */\n\tMute(muted)\n\t{\n\t\tthis.muted = muted;\n\t}\n\n\tLogMsg(value)\n\t{\n\t\tif (this.muted)\n\t\t\treturn;\n\t\tconsole._originalLog_.apply(null, arguments);\n\n\t\t//this.Show();\n\t\tif (!this.consoleShowing)\n\t\t\treturn;\n\n\t\tlet s = value;\n\t\tif (arguments.length > 1)\n\t\t{\n\t\t\ts = \"\";\n\t\t\tfor (let i = 0; i < arguments.length; i++)\n\t\t\t{\n\t\t\t\tif (i > 0)\n\t\t\t\t\ts += ' ';\n\t\t\t\ts += arguments[i];\n\t\t\t}\n\t\t}\n\t\telse if (arguments.length == 1)\n\t\t\ts = arguments[0];\n\n\t\tlet div = this.formatValue(s);\n\n\t\tif (div)\n\t\t{\n\t\t\tlet containerDiv = document.createElement(\"div\");\n\t\t\tcontainerDiv.style.verticalAlign = \"center\";\n\t\t\tcontainerDiv.style.paddingLeft = \"10px\";\n\t\t\tcontainerDiv.style.paddingRight = \"10px\";\n\t\t\tcontainerDiv.style.marginTop = \"2px\";\n\t\t\tcontainerDiv.appendChild(div);\n\t\t\tthis.consoleDiv.appendChild(containerDiv);\n\t\t\tthis.consoleDiv.scrollTop = this.consoleDiv.scrollHeight;\n\t\t}\n\t}\n\n\tLogMsgError(value)\n\t{\n\t\tif (this.muted)\n\t\t\treturn;\n\t\tconsole._originalLog_.apply(null, arguments);\n\n\t\t//this.Show();\n\t\tif (!this.consoleShowing)\n\t\t\treturn;\n\n\t\tlet s = value;\n\t\tif (arguments.length > 1)\n\t\t{\n\t\t\ts = \"\";\n\t\t\tfor (let i = 0; i < arguments.length; i++)\n\t\t\t{\n\t\t\t\tif (i > 0)\n\t\t\t\t\ts += ' ';\n\t\t\t\ts += arguments[i];\n\t\t\t}\n\t\t}\n\t\telse if (arguments.length == 1)\n\t\t\ts = arguments[0];\n\n\t\tlet div = this.formatValue(s);\n\n\t\tif (div)\n\t\t{\n\t\t\tdiv.style.color = \"red\";\n\t\t\tlet containerDiv = document.createElement(\"div\");\n\t\t\tcontainerDiv.style.verticalAlign = \"center\";\n\t\t\tcontainerDiv.style.paddingLeft = \"10px\";\n\t\t\tcontainerDiv.style.paddingRight = \"10px\";\n\t\t\tcontainerDiv.style.marginTop = \"2px\";\n\t\t\tcontainerDiv.appendChild(div);\n\t\t\tthis.consoleDiv.appendChild(containerDiv);\n\t\t\tthis.consoleDiv.scrollTop = this.consoleDiv.scrollHeight;\n\t\t}\n\t}\n\n\tLogError(error)\n\t{\n\t\tthis.Show();\n\t\tif (!this.consoleShowing)\n\t\t\treturn;\n\n\t\tlet div = this.formatValue(error.message);\n\n\t\tif (div)\n\t\t{\n\t\t\tdiv.style.color = \"red\";\n\t\t\tlet containerDiv = document.createElement(\"div\");\n\t\t\tcontainerDiv.style.verticalAlign = \"center\";\n\t\t\tcontainerDiv.style.paddingLeft = \"10px\";\n\t\t\tcontainerDiv.style.paddingRight = \"10px\";\n\t\t\tcontainerDiv.style.marginTop = \"2px\";\n\t\t\tcontainerDiv.appendChild(div);\n\t\t\tthis.consoleDiv.appendChild(containerDiv);\n\t\t\tthis.consoleDiv.scrollTop = this.consoleDiv.scrollHeight;\n\t\t}\n\n\t\tdiv = this.formatValue(error.filename + ':' + error.lineno);\n\n\t\tif (div)\n\t\t{\n\t\t\tdiv.style.color = \"red\";\n\t\t\tlet containerDiv = document.createElement(\"div\");\n\t\t\tcontainerDiv.style.verticalAlign = \"center\";\n\t\t\tcontainerDiv.style.paddingLeft = \"10px\";\n\t\t\tcontainerDiv.style.paddingRight = \"10px\";\n\t\t\tcontainerDiv.style.marginTop = \"2px\";\n\t\t\tcontainerDiv.appendChild(div);\n\t\t\tthis.consoleDiv.appendChild(containerDiv);\n\t\t\tthis.consoleDiv.scrollTop = this.consoleDiv.scrollHeight;\n\t\t}\n\t}\n\n\tformatValue(value)\n\t{\n\t\tlet res = null;\n\n\t\tswitch (typeof(value))\n\t\t{\n\t\t\tcase \"number\":\n\t\t\t\tres = this.showNumber(value);\n\t\t\t\tbreak;\n\t\t\tcase \"string\":\n\t\t\t\tres = this.showString(value);\n\t\t\t\tbreak;\n\t\t\tcase \"object\":\n\t\t\t\tres = this.showObject(value);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tres = this.showString(typeof(value));\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (res)\n\t\t{\n\t\t\tres.style.display = \"inline\";\n\t\t}\n\t\treturn res;\n\t}\n\n\tshowNumber(value)\n\t{\n\t\tlet div = document.createElement(\"div\");\n\t\tdiv.appendChild(document.createTextNode(value));\n\t\tdiv.style.color = \"blue\";\n\t\treturn div;\n\t}\n\n\tshowString(value)\n\t{\n\t\tlet div = document.createElement(\"div\");\n\t\tdiv.appendChild(document.createTextNode(value));\n\t\tdiv.style.color = \"black\";\n\t\treturn div;\n\t}\n\n\tshowTheHTML(value)\n\t{\n\t\tlet div=document.createElement(\"div\");\n\t\tif(value.nodeType == 3)\n\t\t{ // textnode\n\t\t\tlet div=document.createElement(\"span\");\n\t\t\tthis.addSpan(div,value.nodeValue);\n\t\t\treturn div;\n\t\t}\n\t\tdiv=document.createElement(\"div\");\n\t\tif(value.nodeType == 1)\n\t\t{ // element\n\t\t\tthis.addSpan(div,\"<\");\n\t\t\tthis.addSpan(div,value.tagName.toLowerCase(),\"purple\");\n\t\t\tfor(let i=0;i<value.attributes.length;i++){\n\t\t\t\tthis.addSpan(div,\" \");\n\t\t\t\tthis.addSpan(div,value.attributes[i].nodeName,\"blue\");\n\t\t\t\tthis.addSpan(div,\"='\");\n\t\t\t\tthis.addSpan(div,value.attributes[i].nodeValue,\"blue\");\n\t\t\t\tthis.addSpan(div,\"'\");\n\t\t\t}\n\t\t\tthis.addSpan(div,\">\");\n\t\t\tfor(let i=0;i<value.childNodes.length;i++){\n\t\t\t\t// div.appendChild(showTheHTML(value.childNodes[i])); //to be continued\n\t\t\t}\n\t\t\tthis.addSpan(div,\" .... \");\n\t\t\tthis.addSpan(div,\"<\");\n\t\t\tthis.addSpan(div,value.tagName.toLowerCase(),\"purple\");\n\t\t\tthis.addSpan(div,\">\");\n\t\t}\n\t\tdiv.style.color=\"black\";\n\t\tdiv.style.display=\"inline\";\n\t\tdiv.style.verticalAlign=\"top\";\n\t\treturn div;\n\t}\n\n\taddSpan(target, text, color)\n\t{\n\t\tlet span = document.createElement(\"span\");\n\t\tspan.appendChild(document.createTextNode(text));\n\t\tif (color)\n\t\t{\n\t\t\tspan.style.color = color;\n\t\t}\n\t\ttarget.appendChild(span);\n\t}\n\n\tshowObject(value)\n\t{\n\t\tlet div = document.createElement(\"div\");\n\t\tif (!value)\n\t\t\treturn div;\n\t\tif (value && value.nodeType)\n\t\t{\n\t\t\treturn this.showTheHTML(value);\n\t\t}\n\t\tif (value.length)\n\t\t{\n\t\t\tdiv.appendChild(document.createTextNode(\"[\"));\n\t\t\tfor (let i = 0; i < value.length; i++)\n\t\t\t{\n\t\t\t\tdiv.appendChild(this.formatValue(value[i]));\n\t\t\t\tif (i < value.length - 1)\n\t\t\t\t{\n\t\t\t\t\tdiv.appendChild(document.createTextNode(\", \"));\n\t\t\t\t}\n\t\t\t}\n\t\t\tdiv.appendChild(document.createTextNode(\"]\"));\n\t\t\tdiv.style.color = \"black\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet objDiv = document.createElement(\"div\");\n\t\t\tlet arrow = document.createElement(\"span\");\n\t\t\tarrow.appendChild(document.createTextNode(\"  Object\"));\n\t\t\tarrow.style.color = \"gray\";\n\t\t\tobjDiv.appendChild(arrow);\n\t\t\tobjDiv.style.display = \"inline\";\n\t\t\tarrow.style.fontSize = \"11px\";\n\t\t\tobjDiv.theObject = value;\n\t\t\tobjDiv.expanded = false;\n\t\t\tobjDiv.addEventListener(\"click\", function(evt)\n\t\t\t{\n\t\t\t\tif (objDiv.expanded)\n\t\t\t\t{\n\t\t\t\t\tobjDiv.firstChild.textContent = \"  Object\";\n\t\t\t\t\twhile (objDiv.childNodes.length > 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tobjDiv.removeChild(objDiv.lastChild);\n\t\t\t\t\t}\n\t\t\t\t\tobjDiv.expanded = false;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet x = this.expandObject(objDiv.theObject);\n\t\t\t\t\tobjDiv.appendChild(x);\n\t\t\t\t\tobjDiv.firstChild.textContent = \"  Object\";\n\t\t\t\t\tobjDiv.expanded = true;\n\t\t\t\t}\n\t\t\t\tevt.stopPropagation();\n\t\t\t}.bind(this), false);\n\t\t\tdiv.appendChild(objDiv);\n\t\t\tdiv.style.display = \"inline-block\";\n\t\t}\n\t\treturn div;\n\t}\n\n\texpandObject(value)\n\t{\n\t\tlet div=document.createElement(\"div\");\n\t\tfor (let i in value)\n\t\t{\n\t\t\tlet nameValueDiv = document.createElement(\"div\");\n\t\t\tlet nameSpan = document.createElement(\"span\");\n\t\t\tnameSpan.appendChild(document.createTextNode(i + \": \"));\n\t\t\tnameSpan.style.color = \"purple\";\n\t\t\tnameValueDiv.appendChild(nameSpan);\n\t\t\tif (i != \"opener\")\n\t\t\t{ // error prevent\n\t\t\t\tnameValueDiv.appendChild(this.formatValue(value[i]));\n\t\t\t}\n\t\t\tnameValueDiv.style.verticalAlign = \"top\";\n\t\t\tnameSpan.style.verticalAlign = \"top\";\n\t\t\t//nameValueDiv.style.display=\"inline-block\";\n\t\t\tdiv.appendChild(nameValueDiv);\n\t\t}\n\t\t//div.style.border=\"1px solid black\";\n\t\tdiv.style.marginLeft = \"14px\";\n\t\treturn div;\n\t}\n}\n\nlm.Console = lm_Console;\n\nlm.AddLoadEvent(function()\n{\n\tlm.console = new lm.Console(); // Set it and forget it - it should manage itself automatically.\n//lm.Log(\"Regular log - goes to the browser console, or custom console if visible.\")\n//lm.DebugLog(\"Only in Debug mode - brings up the custom console if necessary.\");\n//lm.VerboseLog(\"Always appears - brings up the custom console if necessary.\");\n//lm.Error(\"Always appears - brings up the custom console if necessary.\");\n\tdocument.addEventListener(\"mousedown\", function(e)\n\t{\n\t\t// lm.Log(\"MouseDown\");\n\t\t// lm._MouseDownCount_++;\n\t\tlm._MouseDownCount_ = 1;\n\t}, false);\n\tdocument.addEventListener(\"mouseup\", function(e)\n\t{\n\t\t// lm.Log(\"MouseUp\");\n\t\t// lm._MouseDownCount_--;\n\t\t// if (lm._MouseDownCount_ < 0)\n\t\t// \tlm.ErrorLog(\"Unexpected: MouseDownCount < 0\");\n\t\tlm._MouseDownCount_ = 0;\n\t}, false);\n\tdocument.addEventListener(\"dragend\", function(e)\n\t{\n\t\t// lm.Log(\"DragEnd\");\n\t\t// lm._MouseDownCount_--;\n\t\t// if (lm._MouseDownCount_ < 0)\n\t\t// \tlm.ErrorLog(\"Unexpected: MouseDownCount < 0\");\n\t\tlm._MouseDownCount_ = 0;\n\t}, false);\n\tdocument.addEventListener(\"touchstart\", function(e)\n\t{\n\t\t// lm.Log(\"TouchStart\");\n\t\t// lm.ErrorLog(\"Start: \" + e.targetTouches.length);\n\t\tlm._MouseDownCount_ = e.targetTouches.length;\n\t}, false);\n\tdocument.addEventListener(\"touchend\", function(e)\n\t{\n\t\t// lm.Log(\"TouchEnd\");\n\t\t// lm.ErrorLog(\"Up: \" + e.targetTouches.length);\n\t\tlm._MouseDownCount_ = e.targetTouches.length;\n\t\tif (lm._MouseDownCount_ < 0)\n\t\t\tlm.ErrorLog(\"Unexpected: MouseDownCount < 0\");\n\t}, false);\n\tdocument.addEventListener(\"touchcancel\", function(e)\n\t{\n\t\t// lm.Log(\"TouchCancel\");\n\t\t// lm.ErrorLog(\"Cancel: \" + e.targetTouches.length);\n\t\tlm._MouseDownCount_ = e.targetTouches.length;\n\t\tif (lm._MouseDownCount_ < 0)\n\t\t\tlm.ErrorLog(\"Unexpected: MouseDownCount < 0\");\n\t}, false);\n}, true);\n"],"names":["_dismissDropdownsOnClick","event","target","matches","dropdowns","document","getElementsByClassName","i","length","openDropdown","classList","contains","lm","ToggleDropdown","global","this","DEBUG","TINY","HUGE","PI","Math","PI2","PIOVER2","IsMobileDevice","check","a","navigator","userAgent","vendor","window","opera","test","substr","ua","toLowerCase","indexOf","_MouseDownCount_","IsMouseDown","FocusedInput","Abs","Round","parseInt","Sgn","Zsgn","Frandom","random","FrandomSgn","RandomInt","min","max","Floor","RandomFloat","RandomBool","odds","Ceil","Mod","x","n","Rad","Deg","Min","b","Max","Lerp","l","h","Slerp","percent","SplineInterp4","xVal","preVal","postVal","inA","inB","tempVec","f","y","Minus","Times","Plus","DivEq","TimesEq","yMin","yMax","Clamp","res","v","RealEqual","r1","r2","tolerance","Default","variable","value","undefined","RgbStringToHexString","colorStr","split","map","toString","join","RgbStringToRgbColor","RgbColor","UUID","d","Date","getTime","replace","c","r","floor","RemovePunctuation","str","RemoveFileExtension","IsImageValid","img","videoWidth","videoHeight","readyState","complete","naturalWidth","Format","args","arguments","pattern","RegExp","String","match","index","ShuffleArray","array","len","shuffles","item","pop","pos","splice","AddLoadEvent","func","makeFirst","oldonload","onload","onmousedown","ontouchstart","ConvertObjectType","existingObj","typeStr","obj","eval","prop","hasOwnProperty","RestoreObjectTypes","arg","result","_lmType_","slice","TagObjectTypes","constructor","name","Serialize","PreSerialize","JSON","stringify","key","Unserialize","parse","PostUnserialize","Clone","o","Array","isArray","tempObj","arrayValue","json","clone","json1","LoadJSON","url","callback","xobj","XMLHttpRequest","overrideMimeType","open","onreadystatechange","status","parsedObject","responseText","send","lm_Stopwatch","active","elapsedTime","startTime","Synchronize","s2","Start","Stop","ElapsedTime","SetElapsedTime","MarkLap","ResumeLap","loopTime","loopFraction","backAndForth","fps","SetFrameRate","CurrentFrame","SetLoopDuration","ElapsedLoopPercentage","Stopwatch","lm_RgbColor","g","styles","getComputedStyle","documentElement","styleCol","getPropertyValue","FloatToIntegerColor","IntegerToFloatColor","PixiColor","HTMLColor","ToHSVColor","s","rf","gf","bf","delta","FromHSVColor","hsv","hf","sf","vf","p","q","t","lm_Animation","duration","interpolation","Run","callbackFunction","timer","prevFrame","requestAnimationFrame","_AnimationCallback","bind","doCallback","percentage","frame","done","_ElasticPercent","_BouncePercent","bounceCount","mode","bounceScale","freq","pow","sin","cutoff","scaleReduction","scale","sqrt","Animation","console","Log","consoleShowing","LogMsg","apply","_originalLog_","log","ErrorLog","browserConsoleShowing","Show","LogMsgError","DebugLog","VerboseLog","Error","Assert","condition","message","lm_Console","muted","consoleDiv","addEventListener","error","LogError","createElement","style","position","bottom","left","fontFamily","fontSize","cursor","backgroundColor","width","height","borderTop","overflow","letterSpacing","zIndex","body","appendChild","Hide","removeChild","Mute","div","formatValue","containerDiv","verticalAlign","paddingLeft","paddingRight","marginTop","scrollTop","scrollHeight","color","filename","lineno","containerDiv1","showNumber","showString","showObject","display","createTextNode","showTheHTML","nodeType","div1","addSpan","nodeValue","tagName","attributes","nodeName","i1","childNodes","text","span","objDiv","arrow","theObject","expanded","evt","firstChild","textContent","lastChild","expandObject","stopPropagation","nameValueDiv","nameSpan","marginLeft","Console","e","targetTouches"],"version":3,"file":"index.7e401c35.js.map"}