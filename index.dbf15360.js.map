{"mappings":"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","sources":["../js/vendor/Three.js/r145/examples_js/controls/TrackballControls.js"],"sourcesContent":["( function () {\n\n\tconst _changeEvent = {\n\t\ttype: 'change'\n\t};\n\tconst _startEvent = {\n\t\ttype: 'start'\n\t};\n\tconst _endEvent = {\n\t\ttype: 'end'\n\t};\n\n\tclass TrackballControls extends THREE.EventDispatcher {\n\n\t\tconstructor( object, domElement ) {\n\n\t\t\tsuper();\n\t\t\tconst scope = this;\n\t\t\tconst STATE = {\n\t\t\t\tNONE: - 1,\n\t\t\t\tROTATE: 0,\n\t\t\t\tZOOM: 1,\n\t\t\t\tPAN: 2,\n\t\t\t\tTOUCH_ROTATE: 3,\n\t\t\t\tTOUCH_ZOOM_PAN: 4\n\t\t\t};\n\t\t\tthis.object = object;\n\t\t\tthis.domElement = domElement;\n\t\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\t\t\t// API\n\n\t\t\tthis.enabled = true;\n\t\t\tthis.screen = {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t};\n\t\t\tthis.rotateSpeed = 1.0;\n\t\t\tthis.zoomSpeed = 1.2;\n\t\t\tthis.panSpeed = 0.3;\n\t\t\tthis.noRotate = false;\n\t\t\tthis.noZoom = false;\n\t\t\tthis.noPan = false;\n\t\t\tthis.staticMoving = false;\n\t\t\tthis.dynamicDampingFactor = 0.2;\n\t\t\tthis.minDistance = 0;\n\t\t\tthis.maxDistance = Infinity;\n\t\t\tthis.keys = [ 'KeyA',\n\t\t\t\t/*A*/\n\t\t\t\t'KeyS',\n\t\t\t\t/*S*/\n\t\t\t\t'KeyD'\n\t\t\t\t/*D*/\n\t\t\t];\n\t\t\tthis.mouseButtons = {\n\t\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t\t}; // internals\n\n\t\t\tthis.target = new THREE.Vector3();\n\t\t\tconst EPS = 0.000001;\n\t\t\tconst lastPosition = new THREE.Vector3();\n\t\t\tlet lastZoom = 1;\n\t\t\tlet _state = STATE.NONE,\n\t\t\t\t_keyState = STATE.NONE,\n\t\t\t\t_touchZoomDistanceStart = 0,\n\t\t\t\t_touchZoomDistanceEnd = 0,\n\t\t\t\t_lastAngle = 0;\n\n\t\t\tconst _eye = new THREE.Vector3(),\n\t\t\t\t_movePrev = new THREE.Vector2(),\n\t\t\t\t_moveCurr = new THREE.Vector2(),\n\t\t\t\t_lastAxis = new THREE.Vector3(),\n\t\t\t\t_zoomStart = new THREE.Vector2(),\n\t\t\t\t_zoomEnd = new THREE.Vector2(),\n\t\t\t\t_panStart = new THREE.Vector2(),\n\t\t\t\t_panEnd = new THREE.Vector2(),\n\t\t\t\t_pointers = [],\n\t\t\t\t_pointerPositions = {}; // for reset\n\n\n\t\t\tthis.target0 = this.target.clone();\n\t\t\tthis.position0 = this.object.position.clone();\n\t\t\tthis.up0 = this.object.up.clone();\n\t\t\tthis.zoom0 = this.object.zoom; // methods\n\n\t\t\tthis.handleResize = function () {\n\n\t\t\t\tconst box = scope.domElement.getBoundingClientRect(); // adjustments come from similar code in the jquery offset() function\n\n\t\t\t\tconst d = scope.domElement.ownerDocument.documentElement;\n\t\t\t\tscope.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\t\t\tscope.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\t\t\tscope.screen.width = box.width;\n\t\t\t\tscope.screen.height = box.height;\n\n\t\t\t};\n\n\t\t\tconst getMouseOnScreen = function () {\n\n\t\t\t\tconst vector = new THREE.Vector2();\n\t\t\t\treturn function getMouseOnScreen( pageX, pageY ) {\n\n\t\t\t\t\tvector.set( ( pageX - scope.screen.left ) / scope.screen.width, ( pageY - scope.screen.top ) / scope.screen.height );\n\t\t\t\t\treturn vector;\n\n\t\t\t\t};\n\n\t\t\t}();\n\n\t\t\tconst getMouseOnCircle = function () {\n\n\t\t\t\tconst vector = new THREE.Vector2();\n\t\t\t\treturn function getMouseOnCircle( pageX, pageY ) {\n\n\t\t\t\t\tvector.set( ( pageX - scope.screen.width * 0.5 - scope.screen.left ) / ( scope.screen.width * 0.5 ), ( scope.screen.height + 2 * ( scope.screen.top - pageY ) ) / scope.screen.width // screen.width intentional\n\t\t\t\t\t);\n\t\t\t\t\treturn vector;\n\n\t\t\t\t};\n\n\t\t\t}();\n\n\t\t\tthis.rotateCamera = function () {\n\n\t\t\t\tconst axis = new THREE.Vector3(),\n\t\t\t\t\tquaternion = new THREE.Quaternion(),\n\t\t\t\t\teyeDirection = new THREE.Vector3(),\n\t\t\t\t\tobjectUpDirection = new THREE.Vector3(),\n\t\t\t\t\tobjectSidewaysDirection = new THREE.Vector3(),\n\t\t\t\t\tmoveDirection = new THREE.Vector3();\n\t\t\t\treturn function rotateCamera() {\n\n\t\t\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\n\t\t\t\t\tlet angle = moveDirection.length();\n\n\t\t\t\t\tif ( angle ) {\n\n\t\t\t\t\t\t_eye.copy( scope.object.position ).sub( scope.target );\n\n\t\t\t\t\t\teyeDirection.copy( _eye ).normalize();\n\t\t\t\t\t\tobjectUpDirection.copy( scope.object.up ).normalize();\n\t\t\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\n\t\t\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\n\t\t\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\n\t\t\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\n\t\t\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\n\t\t\t\t\t\tangle *= scope.rotateSpeed;\n\t\t\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\n\n\t\t\t\t\t\t_eye.applyQuaternion( quaternion );\n\n\t\t\t\t\t\tscope.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t\t\t_lastAxis.copy( axis );\n\n\t\t\t\t\t\t_lastAngle = angle;\n\n\t\t\t\t\t} else if ( ! scope.staticMoving && _lastAngle ) {\n\n\t\t\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - scope.dynamicDampingFactor );\n\n\t\t\t\t\t\t_eye.copy( scope.object.position ).sub( scope.target );\n\n\t\t\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\n\n\t\t\t\t\t\t_eye.applyQuaternion( quaternion );\n\n\t\t\t\t\t\tscope.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t\t\t};\n\n\t\t\t}();\n\n\t\t\tthis.zoomCamera = function () {\n\n\t\t\t\tlet factor;\n\n\t\t\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\n\t\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\tscope.object.zoom /= factor;\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * scope.zoomSpeed;\n\n\t\t\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\t\tscope.object.zoom /= factor;\n\t\t\t\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( scope.staticMoving ) {\n\n\t\t\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tthis.panCamera = function () {\n\n\t\t\t\tconst mouseChange = new THREE.Vector2(),\n\t\t\t\t\tobjectUp = new THREE.Vector3(),\n\t\t\t\t\tpan = new THREE.Vector3();\n\t\t\t\treturn function panCamera() {\n\n\t\t\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\t\t\tif ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\t\tconst scale_x = ( scope.object.right - scope.object.left ) / scope.object.zoom / scope.domElement.clientWidth;\n\t\t\t\t\t\t\tconst scale_y = ( scope.object.top - scope.object.bottom ) / scope.object.zoom / scope.domElement.clientWidth;\n\t\t\t\t\t\t\tmouseChange.x *= scale_x;\n\t\t\t\t\t\t\tmouseChange.y *= scale_y;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmouseChange.multiplyScalar( _eye.length() * scope.panSpeed );\n\t\t\t\t\t\tpan.copy( _eye ).cross( scope.object.up ).setLength( mouseChange.x );\n\t\t\t\t\t\tpan.add( objectUp.copy( scope.object.up ).setLength( mouseChange.y ) );\n\t\t\t\t\t\tscope.object.position.add( pan );\n\t\t\t\t\t\tscope.target.add( pan );\n\n\t\t\t\t\t\tif ( scope.staticMoving ) {\n\n\t\t\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( scope.dynamicDampingFactor ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t}();\n\n\t\t\tthis.checkDistances = function () {\n\n\t\t\t\tif ( ! scope.noZoom || ! scope.noPan ) {\n\n\t\t\t\t\tif ( _eye.lengthSq() > scope.maxDistance * scope.maxDistance ) {\n\n\t\t\t\t\t\tscope.object.position.addVectors( scope.target, _eye.setLength( scope.maxDistance ) );\n\n\t\t\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( _eye.lengthSq() < scope.minDistance * scope.minDistance ) {\n\n\t\t\t\t\t\tscope.object.position.addVectors( scope.target, _eye.setLength( scope.minDistance ) );\n\n\t\t\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tthis.update = function () {\n\n\t\t\t\t_eye.subVectors( scope.object.position, scope.target );\n\n\t\t\t\tif ( ! scope.noRotate ) {\n\n\t\t\t\t\tscope.rotateCamera();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! scope.noZoom ) {\n\n\t\t\t\t\tscope.zoomCamera();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! scope.noPan ) {\n\n\t\t\t\t\tscope.panCamera();\n\n\t\t\t\t}\n\n\t\t\t\tscope.object.position.addVectors( scope.target, _eye );\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\tscope.checkDistances();\n\t\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\t\tif ( lastPosition.distanceToSquared( scope.object.position ) > EPS ) {\n\n\t\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\t\t\t\t\t\tlastPosition.copy( scope.object.position );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\t\tif ( lastPosition.distanceToSquared( scope.object.position ) > EPS || lastZoom !== scope.object.zoom ) {\n\n\t\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\t\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\t\tlastZoom = scope.object.zoom;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tthis.reset = function () {\n\n\t\t\t\t_state = STATE.NONE;\n\t\t\t\t_keyState = STATE.NONE;\n\t\t\t\tscope.target.copy( scope.target0 );\n\t\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\t\tscope.object.up.copy( scope.up0 );\n\t\t\t\tscope.object.zoom = scope.zoom0;\n\t\t\t\tscope.object.updateProjectionMatrix();\n\n\t\t\t\t_eye.subVectors( scope.object.position, scope.target );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\t\t\t\tscope.dispatchEvent( _changeEvent );\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastZoom = scope.object.zoom;\n\n\t\t\t}; // listeners\n\n\n\t\t\tfunction onPointerDown( event ) {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\t\tif ( _pointers.length === 0 ) {\n\n\t\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\t\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t\t} //\n\n\n\t\t\t\taddPointer( event );\n\n\t\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\t\tonTouchStart( event );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tonMouseDown( event );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onPointerMove( event ) {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\t\tonTouchMove( event );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tonMouseMove( event );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onPointerUp( event ) {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\t\tonTouchEnd( event );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tonMouseUp();\n\n\t\t\t\t} //\n\n\n\t\t\t\tremovePointer( event );\n\n\t\t\t\tif ( _pointers.length === 0 ) {\n\n\t\t\t\t\tscope.domElement.releasePointerCapture( event.pointerId );\n\t\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onPointerCancel( event ) {\n\n\t\t\t\tremovePointer( event );\n\n\t\t\t}\n\n\t\t\tfunction keydown( event ) {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\t\t\twindow.removeEventListener( 'keydown', keydown );\n\n\t\t\t\tif ( _keyState !== STATE.NONE ) {\n\n\t\t\t\t\treturn;\n\n\t\t\t\t} else if ( event.code === scope.keys[ STATE.ROTATE ] && ! scope.noRotate ) {\n\n\t\t\t\t\t_keyState = STATE.ROTATE;\n\n\t\t\t\t} else if ( event.code === scope.keys[ STATE.ZOOM ] && ! scope.noZoom ) {\n\n\t\t\t\t\t_keyState = STATE.ZOOM;\n\n\t\t\t\t} else if ( event.code === scope.keys[ STATE.PAN ] && ! scope.noPan ) {\n\n\t\t\t\t\t_keyState = STATE.PAN;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction keyup() {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\t\t\t_keyState = STATE.NONE;\n\t\t\t\twindow.addEventListener( 'keydown', keydown );\n\n\t\t\t}\n\n\t\t\tfunction onMouseDown( event ) {\n\n\t\t\t\tif ( _state === STATE.NONE ) {\n\n\t\t\t\t\tswitch ( event.button ) {\n\n\t\t\t\t\t\tcase scope.mouseButtons.LEFT:\n\t\t\t\t\t\t\t_state = STATE.ROTATE;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.mouseButtons.MIDDLE:\n\t\t\t\t\t\t\t_state = STATE.ZOOM;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase scope.mouseButtons.RIGHT:\n\t\t\t\t\t\t\t_state = STATE.PAN;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst state = _keyState !== STATE.NONE ? _keyState : _state;\n\n\t\t\t\tif ( state === STATE.ROTATE && ! scope.noRotate ) {\n\n\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t\t\t} else if ( state === STATE.ZOOM && ! scope.noZoom ) {\n\n\t\t\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t\t\t\t_zoomEnd.copy( _zoomStart );\n\n\t\t\t\t} else if ( state === STATE.PAN && ! scope.noPan ) {\n\n\t\t\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t\t\t\t_panEnd.copy( _panStart );\n\n\t\t\t\t}\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t\tfunction onMouseMove( event ) {\n\n\t\t\t\tconst state = _keyState !== STATE.NONE ? _keyState : _state;\n\n\t\t\t\tif ( state === STATE.ROTATE && ! scope.noRotate ) {\n\n\t\t\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t\t\t} else if ( state === STATE.ZOOM && ! scope.noZoom ) {\n\n\t\t\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t\t\t} else if ( state === STATE.PAN && ! scope.noPan ) {\n\n\t\t\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onMouseUp() {\n\n\t\t\t\t_state = STATE.NONE;\n\t\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\t}\n\n\t\t\tfunction onMouseWheel( event ) {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\t\t\tif ( scope.noZoom === true ) return;\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tswitch ( event.deltaMode ) {\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\t// Zoom in pages\n\t\t\t\t\t\t_zoomStart.y -= event.deltaY * 0.025;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\t// Zoom in lines\n\t\t\t\t\t\t_zoomStart.y -= event.deltaY * 0.01;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// undefined, 0, assume pixels\n\t\t\t\t\t\t_zoomStart.y -= event.deltaY * 0.00025;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\t\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\t}\n\n\t\t\tfunction onTouchStart( event ) {\n\n\t\t\t\ttrackPointer( event );\n\n\t\t\t\tswitch ( _pointers.length ) {\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( _pointers[ 0 ].pageX, _pointers[ 0 ].pageY ) );\n\n\t\t\t\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// 2 or more\n\t\t\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\t\t\t\t\t\tconst dx = _pointers[ 0 ].pageX - _pointers[ 1 ].pageX;\n\t\t\t\t\t\tconst dy = _pointers[ 0 ].pageY - _pointers[ 1 ].pageY;\n\t\t\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\t\t\tconst x = ( _pointers[ 0 ].pageX + _pointers[ 1 ].pageX ) / 2;\n\t\t\t\t\t\tconst y = ( _pointers[ 0 ].pageY + _pointers[ 1 ].pageY ) / 2;\n\n\t\t\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\n\n\t\t\t\t\t\t_panEnd.copy( _panStart );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t\tfunction onTouchMove( event ) {\n\n\t\t\t\ttrackPointer( event );\n\n\t\t\t\tswitch ( _pointers.length ) {\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// 2 or more\n\t\t\t\t\t\tconst position = getSecondPointerPosition( event );\n\t\t\t\t\t\tconst dx = event.pageX - position.x;\n\t\t\t\t\t\tconst dy = event.pageY - position.y;\n\t\t\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\t\t\tconst x = ( event.pageX + position.x ) / 2;\n\t\t\t\t\t\tconst y = ( event.pageY + position.y ) / 2;\n\n\t\t\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onTouchEnd( event ) {\n\n\t\t\t\tswitch ( _pointers.length ) {\n\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\t_state = STATE.NONE;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t\t\t\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\n\n\t\t\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX - _movePrev.x, event.pageY - _movePrev.y ) );\n\n\t\t\t\t\t\t_movePrev.copy( _moveCurr );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\t}\n\n\t\t\tfunction contextmenu( event ) {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\t\t\tevent.preventDefault();\n\n\t\t\t}\n\n\t\t\tfunction addPointer( event ) {\n\n\t\t\t\t_pointers.push( event );\n\n\t\t\t}\n\n\t\t\tfunction removePointer( event ) {\n\n\t\t\t\tdelete _pointerPositions[ event.pointerId ];\n\n\t\t\t\tfor ( let i = 0; i < _pointers.length; i ++ ) {\n\n\t\t\t\t\tif ( _pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\t\t\t_pointers.splice( i, 1 );\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction trackPointer( event ) {\n\n\t\t\t\tlet position = _pointerPositions[ event.pointerId ];\n\n\t\t\t\tif ( position === undefined ) {\n\n\t\t\t\t\tposition = new THREE.Vector2();\n\t\t\t\t\t_pointerPositions[ event.pointerId ] = position;\n\n\t\t\t\t}\n\n\t\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t\t}\n\n\t\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\t\tconst pointer = event.pointerId === _pointers[ 0 ].pointerId ? _pointers[ 1 ] : _pointers[ 0 ];\n\t\t\t\treturn _pointerPositions[ pointer.pointerId ];\n\n\t\t\t}\n\n\t\t\tthis.dispose = function () {\n\n\t\t\t\tscope.domElement.removeEventListener( 'contextmenu', contextmenu );\n\t\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerCancel );\n\t\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\t\t\t\twindow.removeEventListener( 'keydown', keydown );\n\t\t\t\twindow.removeEventListener( 'keyup', keyup );\n\n\t\t\t};\n\n\t\t\tthis.domElement.addEventListener( 'contextmenu', contextmenu );\n\t\t\tthis.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\t\tthis.domElement.addEventListener( 'pointercancel', onPointerCancel );\n\t\t\tthis.domElement.addEventListener( 'wheel', onMouseWheel, {\n\t\t\t\tpassive: false\n\t\t\t} );\n\t\t\twindow.addEventListener( 'keydown', keydown );\n\t\t\twindow.addEventListener( 'keyup', keyup );\n\t\t\tthis.handleResize(); // force an update at start\n\n\t\t\tthis.update();\n\n\t\t}\n\n\t}\n\n\tTHREE.TrackballControls = TrackballControls;\n\n} )();\n"],"names":["_changeEvent","type","_startEvent","_endEvent","TrackballControls","THREE","EventDispatcher","constructor","object","domElement","super","scope","this","STATE","style","touchAction","enabled","screen","left","top","width","height","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","keys","mouseButtons","LEFT","MOUSE","ROTATE","MIDDLE","DOLLY","RIGHT","PAN","target","Vector3","EPS","lastPosition","lastZoom","_state","_keyState","_touchZoomDistanceStart","_touchZoomDistanceEnd","_lastAngle","_eye","_movePrev","Vector2","_moveCurr","_lastAxis","_zoomStart","_zoomEnd","_panStart","_panEnd","_pointers","_pointerPositions","target0","clone","position0","position","up0","up","zoom0","zoom","handleResize","box","getBoundingClientRect","d","ownerDocument","documentElement","window","pageXOffset","clientLeft","pageYOffset","clientTop","getMouseOnScreen","vector","pageX","pageY","set","getMouseOnCircle","onPointerDown","event","length","setPointerCapture","pointerId","addEventListener","onPointerMove","onPointerUp","push","addPointer","pointerType","trackPointer","copy","dx","dy","Math","sqrt","x","y","dispatchEvent","onTouchStart","button","state","onMouseDown","pointer","getSecondPointerPosition","onTouchMove","onMouseMove","onTouchEnd","removePointer","releasePointerCapture","removeEventListener","onPointerCancel","keydown","code","keyup","onMouseWheel","preventDefault","deltaMode","deltaY","contextmenu","i","splice","undefined","rotateCamera","axis","quaternion","Quaternion","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","angle","sub","normalize","crossVectors","setLength","add","setFromAxisAngle","applyQuaternion","zoomCamera","factor","isPerspectiveCamera","multiplyScalar","isOrthographicCamera","updateProjectionMatrix","console","warn","panCamera","mouseChange","objectUp","pan","lengthSq","scale_x","right","clientWidth","scale_y","bottom","cross","subVectors","checkDistances","addVectors","update","lookAt","distanceToSquared","reset","dispose","passive"],"version":3,"file":"index.dbf15360.js.map"}